// IBM Watson Speech JavaScript SDK
// 0.34.0
// Generated at Thu Aug 31 17:36:51 EDT 2017
// Copyright IBM (Apache-2.0)
// http://watson-speech.mybluemix.net/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WatsonSpeech=e():t.WatsonSpeech=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=43)}([function(t,e,r){"use strict";(function(t){function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=o.prototype:(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return s(this,t,e,r)}function s(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?h(t,e,r,n):"string"==typeof e?c(t,e,r):p(t,e)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,r,n){return a(e),e<=0?i(t,e):void 0!==r?"string"==typeof n?i(t,e).fill(r,n):i(t,e).fill(r):i(t,e)}function f(t,e){if(a(e),t=i(t,e<0?0:0|d(e)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function c(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(e,r),s=(t=i(t,n)).write(e,r);return s!==n&&(t=t.slice(0,s)),t}function l(t,e){var r=e.length<0?0:0|d(e.length);t=i(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function h(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),o.TYPED_ARRAY_SUPPORT?(t=e).__proto__=o.prototype:t=l(t,e),t}function p(t,e){if(o.isBuffer(e)){var r=0|d(e.length);return 0===(t=i(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||G(e.length)?i(t,0):l(t,e);if("Buffer"===e.type&&Z(e.data))return l(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function y(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(t).length;default:if(n)return W(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,e,r);case"utf8":case"utf-8":return O(this,e,r);case"ascii":return j(this,e,r);case"latin1":case"binary":return k(this,e,r);case"base64":return R(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}var f;if(i){var c=-1;for(f=r;f<a;f++)if(o(t,f)===o(e,-1===c?0:f-c)){if(-1===c&&(c=f),f-c+1===u)return c*s}else-1!==c&&(f-=f-c),c=-1}else for(r+u>a&&(r=a-u),f=r;f>=0;f--){for(var l=!0,h=0;h<u;h++)if(o(t,f+h)!==o(e,h)){l=!1;break}if(l)return f}return-1}function w(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function _(t,e,r,n){return J(W(e,t.length-r),t,r,n)}function E(t,e,r,n){return J(q(e),t,r,n)}function S(t,e,r,n){return E(t,e,r,n)}function T(t,e,r,n){return J(H(e),t,r,n)}function A(t,e,r,n){return J($(e,t.length-r),t,r,n)}function R(t,e,r){return 0===e&&r===t.length?X.fromByteArray(t):X.fromByteArray(t.slice(e,r))}function O(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var u,f,c,l;switch(a){case 1:o<128&&(s=o);break;case 2:128==(192&(u=t[i+1]))&&(l=(31&o)<<6|63&u)>127&&(s=l);break;case 3:u=t[i+1],f=t[i+2],128==(192&u)&&128==(192&f)&&(l=(15&o)<<12|(63&u)<<6|63&f)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:u=t[i+1],f=t[i+2],c=t[i+3],128==(192&u)&&128==(192&f)&&128==(192&c)&&(l=(15&o)<<18|(63&u)<<12|(63&f)<<6|63&c)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return x(n)}function x(t){var e=t.length;if(e<=K)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=K));return r}function j(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function k(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function B(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=Y(t[o]);return i}function P(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,r,n,i,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function U(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function I(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function C(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(t,e,r,n,i){return i||C(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(t,e,r,n,23,4),r+4}function N(t,e,r,n,i){return i||C(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(t,e,r,n,52,8),r+8}function F(t){if((t=z(t).replace(Q,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function z(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function W(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function $(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}function H(t){return X.toByteArray(F(t))}function J(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function G(t){return t!==t}var X=r(45),V=r(46),Z=r(24);e.Buffer=o,e.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=n(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,r){return s(null,t,e,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,r){return u(null,t,e,r)},o.allocUnsafe=function(t){return f(null,t)},o.allocUnsafeSlow=function(t){return f(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)b(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):g.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,r,n,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var s=i-n,a=r-e,u=Math.min(s,a),f=this.slice(n,i),c=t.slice(e,r),l=0;l<u;++l)if(f[l]!==c[l]){s=f[l],a=c[l];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":return E(this,t,e,r);case"latin1":case"binary":return S(this,t,e,r);case"base64":return T(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;o.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n;if(o.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=o.prototype;else{var i=e-t;n=new o(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+t]}return n},o.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),V.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),V.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),V.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),V.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):U(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):U(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):U(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):U(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,r){return D(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return D(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return N(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return N(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,s=n-r;if(this===t&&r<e&&e<n)for(i=s-1;i>=0;--i)t[i+e]=this[i+r];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),e);return s},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var s;if("number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var a=o.isBuffer(t)?t:W(new o(t,n).toString()),u=a.length;for(s=0;s<r-e;++s)this[s+e]=a[s%u]}return this};var Q=/[^+\/0-9A-Za-z-_]/g}).call(e,r(6))},function(t,e,r){function n(){i.call(this)}t.exports=n;var i=r(11).EventEmitter;r(2)(n,i),n.Readable=r(7),n.Writable=r(54),n.Duplex=r(55),n.Transform=r(56),n.PassThrough=r(57),n.Stream=n,n.prototype.pipe=function(t,e){function r(e){t.writable&&!1===t.write(e)&&f.pause&&f.pause()}function n(){f.readable&&f.resume&&f.resume()}function o(){c||(c=!0,t.end())}function s(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){f.removeListener("data",r),t.removeListener("drain",n),f.removeListener("end",o),f.removeListener("close",s),f.removeListener("error",a),t.removeListener("error",a),f.removeListener("end",u),f.removeListener("close",u),t.removeListener("close",u)}var f=this;f.on("data",r),t.on("drain",n),t._isStdio||e&&!1===e.end||(f.on("end",o),f.on("close",s));var c=!1;return f.on("error",a),t.on("error",a),f.on("end",u),f.on("close",u),t.on("close",u),t.emit("pipe",f),t}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function s(){y&&p&&(y=!1,p.length?d=p.concat(d):g=-1,d.length&&a())}function a(){if(!y){var t=i(s);y=!0;for(var e=d.length;e;){for(p=d,d=[];++g<e;)p&&p[g].run();g=-1,e=d.length}p=null,y=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function f(){}var c,l,h=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(t){c=r}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(t){l=n}}();var p,d=[],y=!1,g=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new u(t,e)),1!==d.length||y||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,r){(function(t,n){function i(t,r){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(r)?n.showHidden=r:r&&e._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}function u(t,r,n){if(t.customInspect&&r&&T(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return m(i)||(i=u(t,i,n)),i}var o=f(t,r);if(o)return o;var s=Object.keys(r),y=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),S(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(r);if(0===s.length){if(T(r)){var g=r.name?": "+r.name:"";return t.stylize("[Function"+g+"]","special")}if(w(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(E(r))return t.stylize(Date.prototype.toString.call(r),"date");if(S(r))return c(r)}var b="",v=!1,_=["{","}"];if(d(r)&&(v=!0,_=["[","]"]),T(r)&&(b=" [Function"+(r.name?": "+r.name:"")+"]"),w(r)&&(b=" "+RegExp.prototype.toString.call(r)),E(r)&&(b=" "+Date.prototype.toUTCString.call(r)),S(r)&&(b=" "+c(r)),0===s.length&&(!v||0==r.length))return _[0]+b+_[1];if(n<0)return w(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special");t.seen.push(r);var A;return A=v?l(t,r,n,y,s):s.map(function(e){return h(t,r,n,y,e,v)}),t.seen.pop(),p(A,b,_)}function f(t,e){if(v(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return b(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)x(e,String(s))?o.push(h(t,e,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,r,n,i,!0))}),o}function h(t,e,r,n,i,o){var s,a,f;if((f=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=f.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):f.set&&(a=t.stylize("[Setter]","special")),x(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(f.value)<0?(a=g(r)?u(t,f.value,null):u(t,f.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),v(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t,e,r){var n=0;return t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function d(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function g(t){return null===t}function b(t){return"number"==typeof t}function m(t){return"string"==typeof t}function v(t){return void 0===t}function w(t){return _(t)&&"[object RegExp]"===A(t)}function _(t){return"object"==typeof t&&null!==t}function E(t){return _(t)&&"[object Date]"===A(t)}function S(t){return _(t)&&("[object Error]"===A(t)||t instanceof Error)}function T(t){return"function"==typeof t}function A(t){return Object.prototype.toString.call(t)}function R(t){return t<10?"0"+t.toString(10):t.toString(10)}function O(){var t=new Date,e=[R(t.getHours()),R(t.getMinutes()),R(t.getSeconds())].join(":");return[t.getDate(),P[t.getMonth()],e].join(" ")}function x(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var j=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(t).replace(j,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}}),a=n[r];r<o;a=n[++r])g(a)||!_(a)?s+=" "+a:s+=" "+i(a);return s},e.deprecate=function(r,i){if(v(t.process))return function(){return e.deprecate(r,i).apply(this,arguments)};if(!0===n.noDeprecation)return r;var o=!1;return function(){if(!o){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),o=!0}return r.apply(this,arguments)}};var k,B={};e.debuglog=function(t){if(v(k)&&(k=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!B[t])if(new RegExp("\\b"+t+"\\b","i").test(k)){var r=n.pid;B[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else B[t]=function(){};return B[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=y,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=b,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=w,e.isObject=_,e.isDate=E,e.isError=S,e.isFunction=T,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(58);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",O(),e.format.apply(e,arguments))},e.inherits=r(59),e._extend=function(t,e){if(!e||!_(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(e,r(6),r(3))},function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);f.call(this,t),c.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(t){t.end()}var s=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=n;var a=r(12),u=r(8);u.inherits=r(2);var f=r(27),c=r(14);u.inherits(n,f);for(var l=s(c.prototype),h=0;h<l.length;h++){var p=l[h];n.prototype[p]||(n.prototype[p]=c.prototype[p])}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){(e=t.exports=r(27)).Stream=e,e.Readable=e,e.Writable=r(14),e.Duplex=r(5),e.Transform=r(30),e.PassThrough=r(53)},function(t,e,r){(function(t){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){t.exports=function(t){return t=t||this,new Promise(function(r,n){var i=[];t.on("data",function(t){i.push(t)}).on("end",function(){r(e.isBuffer(i[0])?e.concat(i).toString():i)}).on("error",n)})}}).call(e,r(0).Buffer)},function(t,e,r){var n=r(78);t.exports=function(t,e){return t=t||{},Object.keys(e).forEach(function(r){void 0===t[r]&&(t[r]=n(e[r]))}),t}},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,a,u,f;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(r=this._events[t],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(o(r))for(a=Array.prototype.slice.call(arguments,1),i=(f=r.slice()).length,u=0;u<i;u++)f[u].apply(this,a);return!0},r.prototype.addListener=function(t,e){var i;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,i,s,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],s=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(a=s;a-- >0;)if(r[a]===e||r[a].listener&&r[a].listener===e){i=a;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,n)});case 4:return e.nextTick(function(){t.call(null,r,n,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}:t.exports=e.nextTick}).call(e,r(3))},function(t,e,r){"use strict";(function(t){var n=r(0),i=n.Buffer,o=n.SlowBuffer,s=n.kMaxLength||2147483647;e.alloc=function(t,e,r){if("function"==typeof i.alloc)return i.alloc(t,e,r);if("number"==typeof r)throw new TypeError("encoding must not be number");if("number"!=typeof t)throw new TypeError("size must be a number");if(t>s)throw new RangeError("size is too large");var n=r,o=e;void 0===o&&(n=void 0,o=0);var a=new i(t);if("string"==typeof o)for(var u=new i(o,n),f=u.length,c=-1;++c<t;)a[c]=u[c%f];else a.fill(o);return a},e.allocUnsafe=function(t){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>s)throw new RangeError("size is too large");return new i(t)},e.from=function(e,r,n){if("function"==typeof i.from&&(!t.Uint8Array||Uint8Array.from!==i.from))return i.from(e,r,n);if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("string"==typeof e)return new i(e,r);if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var o=r;if(1===arguments.length)return new i(e);void 0===o&&(o=0);var s=n;if(void 0===s&&(s=e.byteLength-o),o>=e.byteLength)throw new RangeError("'offset' is out of bounds");if(s>e.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(e.slice(o,o+s))}if(i.isBuffer(e)){var a=new i(e.length);return e.copy(a,0,0,e.length),a}if(e){if(Array.isArray(e)||"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return new i(e);if("Buffer"===e.type&&Array.isArray(e.data))return new i(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},e.allocUnsafeSlow=function(t){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>=s)throw new RangeError("size is too large");return new o(t)}}).call(e,r(6))},function(t,e,r){"use strict";(function(e,n){function i(){}function o(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null}function s(t,e){T=T||r(5),t=t||{},this.objectMode=!!t.objectMode,e instanceof T&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){y(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new S(this)}function a(t){if(T=T||r(5),!(P.call(a,this)||this instanceof T))return new a(t);this._writableState=new s(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),j.call(this)}function u(t,e){var r=new Error("write after end");t.emit("error",r),A(e,r)}function f(t,e,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),A(n,o),i=!1),i}function c(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=B.from(e,r)),e}function l(t,e,r,n,i,s){r||(n=c(e,n,i),k.isBuffer(n)&&(i="buffer"));var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var f=e.lastBufferedRequest;e.lastBufferedRequest=new o(n,i,s),f?f.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else h(t,e,!1,a,n,i,s);return u}function h(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function p(t,e,r,n,i){--e.pendingcb,r?A(i,n):i(n),t._writableState.errorEmitted=!0,t.emit("error",n)}function d(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function y(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(d(r),e)p(t,r,n,e,i);else{var o=v(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||m(t,r),n?R(g,t,r,o,i):g(t,r,o,i)}}function g(t,e,r,n){r||b(t,e),e.pendingcb--,n(),_(t,e)}function b(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function m(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0;r;)i[s]=r,r=r.next,s+=1;h(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new S(e)}else{for(;r;){var a=r.chunk,u=r.encoding,f=r.callback;if(h(t,e,!1,e.objectMode?1:a.length,a,u,f),r=r.next,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=r,e.bufferProcessing=!1}function v(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function w(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function _(t,e){var r=v(e);return r&&(0===e.pendingcb?(w(t,e),e.finished=!0,t.emit("finish")):w(t,e)),r}function E(t,e,r){e.ending=!0,_(t,e),r&&(e.finished?A(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function S(t){var e=this;this.next=null,this.entry=null,this.finish=function(r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}t.exports=a;var T,A=r(12),R=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:A;a.WritableState=s;var O=r(8);O.inherits=r(2);var x={deprecate:r(52)},j=r(28),k=r(0).Buffer,B=r(13);O.inherits(a,j),s.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(s.prototype,"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}();var P;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(P=Function.prototype[Symbol.hasInstance],Object.defineProperty(a,Symbol.hasInstance,{value:function(t){return!!P.call(this,t)||t&&t._writableState instanceof s}})):P=function(t){return t instanceof this},a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},a.prototype.write=function(t,e,r){var n=this._writableState,o=!1,s=k.isBuffer(t);return"function"==typeof e&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=i),n.ended?u(this,r):(s||f(this,n,t,r))&&(n.pendingcb++,o=l(this,n,s,t,e,r)),o},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||m(this,t))},a.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},a.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},a.prototype._writev=null,a.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||E(this,n,r)}}).call(e,r(3),r(50).setImmediate)},function(t,e,r){(function(e){function n(t,r,n){r>>>=0;var i=t.byteLength-r;if(i<0)throw new RangeError("'offset' is out of bounds");if(void 0===n)n=i;else if((n>>>=0)>i)throw new RangeError("'length' is out of bounds");return s?e.from(t.slice(r,r+n)):new e(new Uint8Array(t.slice(r,r+n)))}function i(t,r){if("string"==typeof r&&""!==r||(r="utf8"),!e.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');return s?e.from(t,r):new e(t,r)}var o=r(60),s="function"==typeof e.alloc&&"function"==typeof e.allocUnsafe&&"function"==typeof e.from;t.exports=function(t,r,a){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return o(t)?n(t,r,a):"string"==typeof t?i(t,r):s?e.from(t):new e(t)}}).call(e,r(0).Buffer)},function(t,e,r){"use strict";for(var n=[{code:9,description:"Tab",string:"\t"},{code:10,description:"Line Feed",string:"\n"},{code:11,description:"Vertical Tab",string:"\v"},{code:12,description:"Form Feed",string:"\f"},{code:13,description:"Carriage Return",string:"\r"},{code:32,description:"Space",string:" "},{code:160,description:"No-break space",string:"¬†"},{code:5760,description:"Ogham space mark",string:"·öÄ"},{code:6158,description:"Mongolian vowel separator",string:"·†é"},{code:8192,description:"En quad",string:"‚ÄÄ"},{code:8193,description:"Em quad",string:"‚ÄÅ"},{code:8194,description:"En space",string:"‚ÄÇ"},{code:8195,description:"Em space",string:"‚ÄÉ"},{code:8196,description:"Three-per-em space",string:"‚ÄÑ"},{code:8197,description:"Four-per-em space",string:"‚ÄÖ"},{code:8198,description:"Six-per-em space",string:"‚ÄÜ"},{code:8199,description:"Figure space",string:"‚Äá"},{code:8200,description:"Punctuation space",string:"‚Äà"},{code:8201,description:"Thin space",string:"‚Äâ"},{code:8202,description:"Hair space",string:"‚Ää"},{code:8232,description:"Line separator",string:"\u2028"},{code:8233,description:"Paragraph separator",string:"\u2029"},{code:8239,description:"Narrow no-break space",string:"‚ÄØ"},{code:8287,description:"Medium mathematical space",string:"‚Åü"},{code:12288,description:"Ideographic space",string:"„ÄÄ"},{code:65279,description:"Byte Order Mark",string:"\ufeff"}],i="",o=n.length,s=0;s<o;s+=1)i+=n[s].string;t.exports={list:n,string:i}},function(t,e,r){"use strict";(function(e){function n(t){t.objectMode&&(t.readableObjectMode=!0,delete t.objectMode),i.call(this,t),this.options=t,this.listening=!1,this.initialized=!1,this.finished=!1,this.on("newListener",function(e){t.silent||("results"===e||"result"===e||"speaker_labels"===e?console.log(new Error("Watson Speech to Text RecognizeStream: the "+e+" event was deprecated. Please set {objectMode: true} and listen for the 'data' event instead. Pass {silent: true} to disable this message.")):"connection-close"===e?console.log(new Error("Watson Speech to Text RecognizeStream: the "+e+" event was deprecated. Please listen for the 'close' event instead. Pass {silent: true} to disable this message.")):"connect"===e&&console.log(new Error("Watson Speech to Text RecognizeStream: the "+e+" event was deprecated. Please listen for the 'open' event instead. Pass {silent: true} to disable this message.")))})}var i=r(1).Duplex,o=r(4),s=r(35),a=r(74).w3cwebsocket,u=r(18),f=r(36),c=["inactivity_timeout","timestamps","word_confidence","content-type","interim_results","keywords","keywords_threshold","max_alternatives","word_alternatives_threshold","profanity_filter","smart_formatting","speaker_labels"],l=["customization_id","model","watson-token","X-Watson-Learning-Opt-Out"];o.inherits(n,i),n.WEBSOCKET_CONNECTION_ERROR="WebSocket connection error",n.prototype.initialize=function(){function t(t,e,r){r?r.message=t+" "+r.message:r=new Error(t),r.raw=e,p.emit("error",r)}var e=this.options;e.token&&!e["watson-token"]&&(e["watson-token"]=e.token),e.content_type&&!e["content-type"]&&(e["content-type"]=e.content_type),e["X-WDC-PL-OPT-OUT"]&&!e["X-Watson-Learning-Opt-Out"]&&(e["X-Watson-Learning-Opt-Out"]=e["X-WDC-PL-OPT-OUT"]);var r=o._extend("customization_id"in e?s(e,l):{model:"en-US_BroadbandModel"},s(e,l)),i=f.stringify(r),u=(e.url||"wss://stream.watsonplatform.net/speech-to-text/api").replace(/^http/,"ws")+"/v1/recognize?"+i,h=s(e,c);h.action="start";var p=this,d=this.socket=new a(u,null,null,e.headers,null);p.on("finish",p.finish.bind(p)),d.onerror=function(t){p.listening=!1;var e=new Error("WebSocket connection error");e.name=n.WEBSOCKET_CONNECTION_ERROR,e.event=t,p.emit("error",e),p.push(null)},this.socket.onopen=function(){p.sendJSON(h),p.emit("open")},this.socket.onclose=function(t){p.listening=!1,p.push(null),p.emit("close",t.code,t.reason)},d.onmessage=function(r){if("string"!=typeof r.data)return t("Unexpected binary data received from server",r);var n;try{n=JSON.parse(r.data)}catch(e){return t("Invalid JSON received from service:",r,e)}p.emit("message",r,n),n.error?t(n.error,r):"listening"===n.state?p.listening?(p.listening=!1,d.close()):(p.listening=!0,p.emit("listening")):e.readableObjectMode?p.push(n):Array.isArray(n.results)&&n.results.forEach(function(t){t.final&&t.alternatives&&p.push(t.alternatives[0].transcript,"utf8")})},this.initialized=!0},n.prototype.sendJSON=function(t){return this.emit("send-json",t),this.socket.send(JSON.stringify(t))},n.prototype.sendData=function(t){return this.emit("send-data",t),this.socket.send(t)},n.prototype._read=function(){},n.ERROR_UNRECOGNIZED_FORMAT="UNRECOGNIZED_FORMAT",n.prototype._write=function(t,e,r){var i=this;if(!i.finished)if(this.initialized)i.sendData(t),this.afterSend(r);else{if(!this.options["content-type"]){var o=n.getContentType(t);if(!o){var s=new Error("Unable to determine content-type from file header, please specify manually.");return s.name=n.ERROR_UNRECOGNIZED_FORMAT,this.emit("error",s),void this.push(null)}this.options["content-type"]=o}this.initialize(),this.once("open",function(){i.sendData(t),i.afterSend(r)})}},n.prototype.afterSend=function(t){this.socket.bufferedAmount<=(this._writableState.highWaterMark||0)?e.nextTick(t):setTimeout(this.afterSend.bind(this,t),10)},n.prototype.stop=function(){this.emit("stop"),this.finish()},n.prototype.finish=function(){if(!this.finished){this.finished=!0;var t=this,e={action:"stop"};t.socket&&t.socket.readyState===t.socket.OPEN?t.sendJSON(e):this.once("open",function(){t.sendJSON(e)})}},n.prototype.promise=r(9),n.getContentType=function(t){return u.fromHeader(t)},t.exports=n}).call(e,r(3))},function(t,e,r){"use strict";var n=r(77).extname,i={fLaC:"audio/flac",RIFF:"audio/wav",OggS:"audio/ogg",ID3:"audio/mp3"};e.fromHeader=function(t){var e=t.slice(0,4).toString().substr(0,4);return i[e]||i[e.substr(0,3)]};var o={".mp3":"audio/mp3",".wav":"audio/wav",".flac":"audio/flac",".ogg":"audio/ogg",".oga":"audio/ogg",".opus":"audio/ogg; codec=opus",".webm":"audio/webm"};e.fromFilename=function(t){var e=n("string"==typeof t&&t||t.name||"");return o[e]}},function(t,e,r){"use strict";function n(t){this.options=a(t,{model:"",hesitation:"",decodeStrings:!1}),i.call(this,this.options),this.isJaCn="ja-JP"===this.options.model.substring(0,5)||"zh-CN"===this.options.model.substring(0,5),this._transform=this.options.objectMode?this.transformObject:this.transformString}var i=r(1).Transform,o=r(4),s=r(20),a=r(10);o.inherits(n,i);var u=/%HESITATION ?/g,f=/([a-z])\1{2,}/gi,c=/D_[^\s]+/g;n.prototype.clean=function(t){return t=t.replace(u,this.options.hesitation?this.options.hesitation.trim()+" ":this.options.hesitation).replace(f,"").replace(c,""),this.isJaCn&&(t=t.replace(/ /g,"")),t.trim()+" "},n.prototype.capitalize=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},n.prototype.period=function(t){return(t=t.trim())?"‚Ä¶"===t.substr(-1)?t+" ":t+(this.isJaCn?"„ÄÇ":". "):" "},n.prototype.transformString=function(t,e,r){this.push(this.formatString(t.toString())),r()},n.prototype.transformObject=function(t,e,r){this.push(this.formatResult(t)),r()},n.prototype.formatString=function(t,e){return t=this.capitalize(this.clean(t)),e?t:this.period(t)},n.prototype.formatResult=function(t){return t=s(t),Array.isArray(t.results)&&t.results.forEach(function(e,r){var n=e.final||r!==t.results.length-1;e.alternatives=e.alternatives.map(function(t){return t.transcript=this.formatString(t.transcript,!n),t.timestamps&&(t.timestamps=t.timestamps.map(function(t,e,r){return t[0]=this.clean(t[0]),0===e&&(t[0]=this.capitalize(t[0])),e===r.length-1&&n&&(t[0]=this.period(t[0])),t},this).filter(function(t){return t[0]})),t},this)},this),t},n.prototype.promise=r(9),t.exports=n},function(t,e,r){(function(e){var r=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}function r(n,u,f,c,l){function h(n,f){if(null===n)return null;if(0===f)return n;var g,b;if("object"!=typeof n)return n;if(t(n,o))g=new o;else if(t(n,s))g=new s;else if(t(n,a))g=new a(function(t,e){n.then(function(e){t(h(e,f-1))},function(t){e(h(t,f-1))})});else if(r.__isArray(n))g=[];else if(r.__isRegExp(n))g=new RegExp(n.source,i(n)),n.lastIndex&&(g.lastIndex=n.lastIndex);else if(r.__isDate(n))g=new Date(n.getTime());else{if(y&&e.isBuffer(n))return g=new e(n.length),n.copy(g),g;t(n,Error)?g=Object.create(n):void 0===c?(b=Object.getPrototypeOf(n),g=Object.create(b)):(g=Object.create(c),b=c)}if(u){var m=p.indexOf(n);if(-1!=m)return d[m];p.push(n),d.push(g)}t(n,o)&&n.forEach(function(t,e){var r=h(e,f-1),n=h(t,f-1);g.set(r,n)}),t(n,s)&&n.forEach(function(t){var e=h(t,f-1);g.add(e)});for(var v in n){var w;b&&(w=Object.getOwnPropertyDescriptor(b,v)),w&&null==w.set||(g[v]=h(n[v],f-1))}if(Object.getOwnPropertySymbols)for(var _=Object.getOwnPropertySymbols(n),v=0;v<_.length;v++){var E=_[v];(!(A=Object.getOwnPropertyDescriptor(n,E))||A.enumerable||l)&&(g[E]=h(n[E],f-1),A.enumerable||Object.defineProperty(g,E,{enumerable:!1}))}if(l)for(var S=Object.getOwnPropertyNames(n),v=0;v<S.length;v++){var T=S[v],A=Object.getOwnPropertyDescriptor(n,T);A&&A.enumerable||(g[T]=h(n[T],f-1),Object.defineProperty(g,T,{enumerable:!1}))}return g}"object"==typeof u&&(f=u.depth,c=u.prototype,l=u.includeNonEnumerable,u=u.circular);var p=[],d=[],y=void 0!==e;return void 0===u&&(u=!0),void 0===f&&(f=1/0),h(n,f)}function n(t){return Object.prototype.toString.call(t)}function i(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}var o;try{o=Map}catch(t){o=function(){}}var s;try{s=Set}catch(t){s=function(){}}var a;try{a=Promise}catch(t){a=function(){}}return r.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},r.__objToStr=n,r.__isDate=function(t){return"object"==typeof t&&"[object Date]"===n(t)},r.__isArray=function(t){return"object"==typeof t&&"[object Array]"===n(t)},r.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===n(t)},r.__getRegExpFlags=i,r}();"object"==typeof t&&t.exports&&(t.exports=r)}).call(e,r(0).Buffer)},function(t,e,r){"use strict";function n(t){if(this.options=t=s(t,{decodeStrings:!1,property:null,clear:!0}),this.el="string"==typeof t.outputElement?document.querySelector(t.outputElement):t.outputElement,!this.el)throw new Error("Watson Speech to Text WritableElementStream: missing outputElement");i.call(this,t);var e={INPUT:"value",TEXTAREA:"value"};this.prop=t.property||e[this.el.nodeName]||"textContent",t.clear&&(this.el[this.prop]=""),t.objectMode?(this.finalizedText=this.el[this.prop],this._write=this.writeObject):this._write=this.writeString}var i=r(1).Writable,o=r(4),s=r(10);o.inherits(n,i),n.prototype.writeString=function(t,e,r){this.el[this.prop]+=t,r()},n.prototype.writeObject=function(t,e,r){Array.isArray(t.results)&&t.results.forEach(function(t){t.final?(this.finalizedText+=t.alternatives[0].transcript,this.el[this.prop]=this.finalizedText):this.el[this.prop]=this.finalizedText+t.alternatives[0].transcript},this),r()},t.exports=n},function(t,e,r){"use strict";function n(t){(t=t||{}).objectMode=!0,i.call(this,t)}var i=r(1).Transform,o=r(4),s=r(20);o.inherits(n,i),n.prototype._transform=function(t,e,r){Array.isArray(t.results)?t.results.forEach(function(e){var r=s(e);r.index=t.result_index,this.push(r)},this):this.push(t),r()},n.prototype.promise=r(9),t.exports=n},function(t,e,r){"use strict";function n(t){(t=t||{}).objectMode=!0,this.options=t,i.call(this,t),this.results=[],this.speaker_labels=[],this.mismatchErrorEmitted=!1,this.extraLabels=!1}var i=r(1).Transform,o=r(4),s=r(84),a=r(40),u=r(20);o.inherits(n,i),n.prototype.isFinal=function(){return this.speaker_labels.length&&this.speaker_labels[this.speaker_labels.length-1].final};n.ERROR_MISMATCH="MISMATCH",n.prototype.buildMessage=function(){var t=this.isFinal();this.extraLabels=!1;var e=0,r=-1,i=this.speaker_labels.map(function(t){var i=this.results[e];r++;var o=i.alternatives[0].timestamps[r];if(o||(r=0,e++,o=(i=this.results[e])&&i.alternatives[0].timestamps[r]),!o)return this.extraLabels=!0,null;if(o[1]!==t.from||o[2]!==t.to){if(!this.mismatchErrorEmitted){var s=new Error("Mismatch between speaker_label and word timestamp");s.name=n.ERROR_MISMATCH,s.speaker_label=t,s.timestamp=o,s.speaker_labels=this.speaker_labels,s.results=this.results,this.emit("error",s),this.mismatchErrorEmitted=!0}return null}return{timestamp:o,speaker:t.speaker,result:i}},this);if(!this.extraLabels){var o=(i=i.filter(function(t){return t})).reduce(function(t,e){var r=t[t.length-1];return r&&r.speaker===e.speaker&&r.result===e.result?r.timestamps.push(e.timestamp):(r={speaker:e.speaker,timestamps:[e.timestamp],result:e.result},t.push(r)),t},[]);return{results:o.map(function(e,r){var n,i=o[r-1]||{};(n=e.result===i.result?{alternatives:[{}]}:u(e.result)).speaker=e.speaker;var s=n.alternatives[0];s.transcript=e.timestamps.map(function(t){return t[0]}).join(" ")+" ",s.timestamps=e.timestamps,n.final=t;var a=e.timestamps[0][1],f=e.timestamps[e.timestamps.length-1][2];if(e.result.word_alternatives){var c=e.result.word_alternatives.filter(function(t){return t.start_time>=a&&t.end_time<=f});n.word_alternatives=c}var l=e.result.keywords_result;if(l){var h={};Object.keys(l).forEach(function(t){var e=l[t].filter(function(t){return t.start_time>=a&&t.end_time<=f});e.length&&(h[t]=e)}),n.keywords_result=h}return n}),result_index:0}}},n.prototype.handleResults=function(t){if(a(t)){var e=new Error("SpeakerStream requires that timestamps and speaker_labels be enabled");return e.name=a.ERROR_NO_TIMESTAMPS,void this.emit("error",e)}t.results.filter(function(t){return t.final}).forEach(function(t){this.results.push(t)},this)},n.speakerLabelsSorter=function(t,e){return t.from===e.from?t.to===e.to?0:t.to<e.to?-1:1:t.from<e.from?-1:1},n.prototype.handleSpeakerLabels=function(t){var e=t.speaker_labels;s(this.speaker_labels,e,function(t,e){return t.from===e.from&&t.to===e.to}),this.speaker_labels.push.apply(this.speaker_labels,t.speaker_labels),this.speaker_labels.sort(n.speakerLabelsSorter)},n.prototype._transform=function(t,e,r){var n;Array.isArray(t.results)&&(this.handleResults(t),this.options.speakerlessInterim&&t.results.length&&!1===t.results[0].final&&((n=this.buildMessage()).results=n.results.concat(t.results)),this.extraLabels&&t.results.length&&!0===t.results[0].final&&(n=this.buildMessage())),Array.isArray(t.speaker_labels)&&(this.handleSpeakerLabels(t),n=this.buildMessage()),n&&this.push(n),r()},n.prototype._flush=function(t){var e=this.results.map(function(t){return t.alternatives[0].timestamps}).reduce(function(t,e){return t.concat(e)},[]);if(e.length!==this.speaker_labels.length){var r;r=e.length&&!this.speaker_labels.length?"No speaker_labels found. SpeakerStream requires speaker_labels to be enabled.":"Mismatch between number of word timestamps ("+e.length+") and number of speaker_labels ("+this.speaker_labels.length+") - some data may be lost.";var i=new Error(r);i.name=n.ERROR_MISMATCH,i.speaker_labels=this.speaker_labels,i.results=this.results,this.emit("error",i)}t()},n.prototype.promise=r(9),t.exports=n},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){var n,i;!function(r){"use strict";function o(){this.name="NotSupportedError",this.message="getUserMedia is not implemented in this browser"}function s(){this.then=function(){return this};var t=new o;this.catch=function(e){setTimeout(function(){e(t)})}}function a(t){return u?c?navigator.mediaDevices.getUserMedia(t):new Promise(function(e,r){if(!l)return r(new o);l.call(navigator,t,e,r)}):new s}o.prototype=Error.prototype;var u="undefined"!=typeof Promise,f="undefined"!=typeof navigator,c=f&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,l=f&&(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);a.NotSupportedError=o,a.isSupported=!(!u||!c&&!l),n=[],void 0!==(i=function(){return a}.apply(e,n))&&(t.exports=i)}()},function(t,e,r){"use strict";(function(e){function n(t,r){var n=void 0===window.AudioContext?4096:null;n=(r=r||{}).bufferSize||n;i.call(this,r);var o=this,a=!0,u=new(window.AudioContext||window.webkitAudioContext),f=u.createMediaStreamSource(t),c=u.createScriptProcessor(n,1,1);c.onaudioprocess=function(t){a&&o.push(r.objectMode?t.inputBuffer:s(t.inputBuffer.getChannelData(0).buffer))},f.connect(c),c.connect(u.destination),this.stop=function(){if("closed"!==u.state){try{t.getTracks()[0].stop()}catch(t){}c.disconnect(),f.disconnect();try{u.close()}catch(t){}a=!1,o.push(null),o.emit("close")}},e.nextTick(function(){o.emit("format",{channels:1,bitDepth:32,sampleRate:u.sampleRate,signed:!0,float:!0})})}var i=r(1).Readable,o=r(4),s=r(15);o.inherits(n,i),n.prototype._read=function(){},n.toRaw=function(t){return new Float32Array(t.buffer)},t.exports=n}).call(e,r(3))},function(t,e,r){"use strict";(function(e){function n(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?k(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}function i(t,e){x=x||r(5),t=t||{},this.objectMode=!!t.objectMode,e instanceof x&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new N,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(D||(D=r(29).StringDecoder),this.decoder=new D(t.encoding),this.encoding=t.encoding)}function o(t){if(x=x||r(5),!(this instanceof o))return new o(t);this._readableState=new i(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),P.call(this)}function s(t,e,r,n,i){var o=c(e,r);if(o)t.emit("error",o);else if(null===r)e.reading=!1,l(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var s=new Error("stream.push() after EOF");t.emit("error",s)}else if(e.endEmitted&&i){var u=new Error("stream.unshift() after end event");t.emit("error",u)}else{var f;!e.decoder||i||n||(r=e.decoder.write(r),f=!e.objectMode&&0===r.length),i||(e.reading=!1),f||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&h(t))),d(t,e)}else i||(e.reading=!1);return a(e)}function a(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function u(t){return t>=z?t=z:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function f(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=u(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function c(t,e){var r=null;return M.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function l(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,h(t)}}function h(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(C("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?j(p,t):p(t))}function p(t){C("emit readable"),t.emit("readable"),w(t)}function d(t,e){e.readingMore||(e.readingMore=!0,j(y,t,e))}function y(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(C("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;C("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&B(t,"data")&&(e.flowing=!0,w(t))}}function b(t){C("readable nexttick read 0"),t.read(0)}function m(t,e){e.resumeScheduled||(e.resumeScheduled=!0,j(v,t,e))}function v(t,e){e.reading||(C("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),w(t),e.flowing&&!e.reading&&t.read(0)}function w(t){var e=t._readableState;for(C("flow",e.flowing);e.flowing&&null!==t.read(););}function _(t,e){if(0===e.length)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=E(t,e.buffer,e.decoder),r}function E(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?S(t,e):T(t,e),n}function S(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}function T(t,e){var r=L.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),0===(t-=s)){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}function A(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,j(R,e,t))}function R(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function O(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}t.exports=o;var x,j=r(12),k=r(24);o.ReadableState=i;r(11).EventEmitter;var B=function(t,e){return t.listeners(e).length},P=r(28),M=r(0).Buffer,L=r(13),U=r(8);U.inherits=r(2);var I=r(48),C=void 0;C=I&&I.debuglog?I.debuglog("stream"):function(){};var D,N=r(49);U.inherits(o,P);var F=["error","close","destroy","pause","resume"];o.prototype.push=function(t,e){var r=this._readableState;return r.objectMode||"string"!=typeof t||(e=e||r.defaultEncoding)!==r.encoding&&(t=L.from(t,e),e=""),s(this,r,t,e,!1)},o.prototype.unshift=function(t){return s(this,this._readableState,t,"",!0)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(t){return D||(D=r(29).StringDecoder),this._readableState.decoder=new D(t),this._readableState.encoding=t,this};var z=8388608;o.prototype.read=function(t){C("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return C("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?A(this):h(this),null;if(0===(t=f(t,e))&&e.ended)return 0===e.length&&A(this),null;var n=e.needReadable;C("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&C("length less than watermark",n=!0),e.ended||e.reading?C("reading or ended",n=!1):n&&(C("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=f(r,e)));var i;return null===(i=t>0?_(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&A(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(t,r){function i(t){C("onunpipe"),t===h&&s()}function o(){C("onend"),t.end()}function s(){C("cleanup"),t.removeListener("close",f),t.removeListener("finish",c),t.removeListener("drain",y),t.removeListener("error",u),t.removeListener("unpipe",i),h.removeListener("end",o),h.removeListener("end",s),h.removeListener("data",a),b=!0,!p.awaitDrain||t._writableState&&!t._writableState.needDrain||y()}function a(e){C("ondata"),m=!1,!1!==t.write(e)||m||((1===p.pipesCount&&p.pipes===t||p.pipesCount>1&&-1!==O(p.pipes,t))&&!b&&(C("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,m=!0),h.pause())}function u(e){C("onerror",e),l(),t.removeListener("error",u),0===B(t,"error")&&t.emit("error",e)}function f(){t.removeListener("finish",c),l()}function c(){C("onfinish"),t.removeListener("close",f),l()}function l(){C("unpipe"),h.unpipe(t)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=t;break;case 1:p.pipes=[p.pipes,t];break;default:p.pipes.push(t)}p.pipesCount+=1,C("pipe count=%d opts=%j",p.pipesCount,r);var d=(!r||!1!==r.end)&&t!==e.stdout&&t!==e.stderr?o:s;p.endEmitted?j(d):h.once("end",d),t.on("unpipe",i);var y=g(h);t.on("drain",y);var b=!1,m=!1;return h.on("data",a),n(t,"error",u),t.once("close",f),t.once("finish",c),t.emit("pipe",h),p.flowing||(C("pipe resume"),h.resume()),t},o.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=O(e.pipes,t);return-1===o?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},o.prototype.on=function(t,e){var r=P.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&h(this):j(b,this))}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var t=this._readableState;return t.flowing||(C("resume"),t.flowing=!0,m(this,t)),this},o.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;t.on("end",function(){if(C("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(i){C("wrapped data"),e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)&&(n.push(i)||(r=!0,t.pause()))});for(var i in t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<F.length;o++)t.on(F[o],n.emit.bind(n,F[o]));return n._read=function(e){C("wrapped _read",e),r&&(r=!1,t.resume())},n},o._fromList=_}).call(e,r(3))},function(t,e,r){t.exports=r(11).EventEmitter},function(t,e,r){function n(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=r(0).Buffer,u=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},f=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),n(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};f.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(t=t.slice(r,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);n=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,n),n-=this.charReceived);var n=(e+=t.toString(this.encoding,0,n)).length-1,i=e.charCodeAt(n);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,n)}return e},f.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(e<=2&&r>>4==14){this.charLength=3;break}if(e<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=e},f.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,r).toString(i)}return e}},function(t,e,r){"use strict";function n(t){this.afterTransform=function(e,r){return i(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&t.push(r),i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new n(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,r){s(e,t,r)}):s(e)})}function s(t,e,r){if(e)return t.emit("error",e);null!==r&&void 0!==r&&t.push(r);var n=t._writableState,i=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}t.exports=o;var a=r(5),u=r(8);u.inherits=r(2),u.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(t,e,r){"use strict";var n=r(63),i=r(64),o=Object.prototype.toString;t.exports=function(t){return n(t)?"[object Null]":i(t)?"[object Undefined]":o.call(t)}},function(t,e,r){"use strict";t.exports=r(65)&&"symbol"==typeof Symbol.toStringTag},function(t,e,r){"use strict";t.exports=function(t){return null==t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,r){"use strict";var n=r(69);t.exports=function(t){if(n(t))throw new TypeError("Cannot convert a Symbol value to a string");return String(t)}},function(t,e,r){"use strict";var n=r(73);t.exports=function(t,e){if(!n(t)&&"function"!=typeof t)return{};var r={};if("string"==typeof e)return e in t&&(r[e]=t[e]),r;for(var i=e.length,o=-1;++o<i;){var s=e[o];s in t&&(r[s]=t[s])}return r}},function(t,e,r){"use strict";e.stringify=function(t){return Object.keys(t).map(function(e){return e+"="+("watson-token"===e?t[e]:encodeURIComponent(t[e]))}).join("&")}},function(t,e,r){"use strict";(function(e){function n(t){t=this.options=s(t,{sourceSampleRate:48e3,downsample:!0}),i.call(this,t),this.bufferUnusedSamples=[],t.objectMode||t.writableObjectMode?this._transform=this.handleFirstAudioBuffer:(this._transform=this.transformBuffer,e.nextTick(this.emitFormat.bind(this)))}var i=r(1).Transform,o=r(4),s=r(10),a=r(15);o.inherits(n,i),n.prototype.emitFormat=function(){this.emit("format",{channels:1,bitDepth:16,sampleRate:this.options.downsample?16e3:this.options.sourceSampleRate,signed:!0,float:!1})},n.prototype.downsample=function(t){var e,r,n=null,i=t.length,o=this.bufferUnusedSamples.length;if(o>0){for(n=new Float32Array(o+i),e=0;e<o;++e)n[e]=this.bufferUnusedSamples[e];for(e=0;e<i;++e)n[o+e]=t[e]}else n=t;var s=[-.037935,-89024e-8,.040173,.019989,.0047792,-.058675,-.056487,-.0040653,.14527,.26927,.33913,.26927,.14527,-.0040653,-.056487,-.058675,.0047792,.019989,.040173,-89024e-8,-.037935],a=this.options.sourceSampleRate/16e3,u=Math.floor((n.length-s.length)/a)+1,f=new Float32Array(u);for(e=0;e+s.length-1<n.length;e++){r=Math.round(a*e);for(var c=0,l=0;l<s.length;++l)c+=n[r+l]*s[l];f[e]=c}var h=Math.round(a*e),p=n.length-h;if(p>0)for(this.bufferUnusedSamples=new Float32Array(p),e=0;e<p;++e)this.bufferUnusedSamples[e]=n[h+e];else this.bufferUnusedSamples=new Float32Array(0);return f},n.prototype.floatTo16BitPCM=function(t){for(var e=new DataView(new ArrayBuffer(2*t.length)),r=0;r<t.length;r++){var n=t[r]<0?32768:32767;e.setInt16(2*r,t[r]*n|0,!0)}return a(e.buffer)},n.prototype.handleFirstAudioBuffer=function(t,e,r){this.options.sourceSampleRate=t.sampleRate,this.emitFormat(),this._transform=this.transformAudioBuffer,this._transform(t,e,r)},n.prototype.transformAudioBuffer=function(t,e,r){var n=t.getChannelData(0);this.options.downsample&&(n=this.downsample(n)),this.push(this.floatTo16BitPCM(n)),r()},n.prototype.transformBuffer=function(t,e,r){var n=new Float32Array(t.buffer);this.options.downsample&&(n=this.downsample(n)),this.push(this.floatTo16BitPCM(n)),r()},t.exports=n}).call(e,r(3))},function(t,e,r){"use strict";var n=r(79),i=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),o="";for(var s in i)o+=s;return t!==o},o=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1};t.exports=function(){return Object.assign?i()?n:o()?n:Object.assign:n}},function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Array.prototype.slice,s=r(80),a=Object.prototype.propertyIsEnumerable,u=!a.call({toString:null},"toString"),f=a.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(t){var e=t.constructor;return e&&e.prototype===t},h={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!h["$"+t]&&n.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{l(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),d=function(t){if("undefined"==typeof window||!p)return l(t);try{return l(t)}catch(t){return!1}},y=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===i.call(t),o=s(t),a=e&&"[object String]"===i.call(t),l=[];if(!e&&!r&&!o)throw new TypeError("Object.keys called on a non-object");var h=f&&r;if(a&&t.length>0&&!n.call(t,0))for(var p=0;p<t.length;++p)l.push(String(p));if(o&&t.length>0)for(var y=0;y<t.length;++y)l.push(String(y));else for(var g in t)h&&"prototype"===g||!n.call(t,g)||l.push(String(g));if(u)for(var b=d(t),m=0;m<c.length;++m)b&&"constructor"===c[m]||!n.call(t,c[m])||l.push(c[m]);return l};y.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var t=Object.keys;Object.keys=function(e){return t(s(e)?o.call(e):e)}}}else Object.keys=y;return Object.keys||y},t.exports=y},function(t,e,r){"use strict";t.exports=function(t){return t.results.some(function(t){var e=t.alternatives&&t.alternatives[0];return!(!e||(!e.transcript.trim()||e.timestamps)&&e.timestamps.length)})},t.exports.ERROR_NO_TIMESTAMPS="NO_TIMESTAMPS"},function(t,e,r){"use strict";function n(t){var e=this.audio=new Audio;e.src=t,e.play(),this.stop=function(){e.pause(),e.currentTime=0}}function i(t,e){var r=this.audio=new Audio;if(!r.canPlayType(e)){var n=new Error("Current browser is unable to play back "+e);throw n.name=i.ERROR_UNSUPPORTED_FORMAT,n.contentType=e,n}r.src=URL.createObjectURL(new Blob([t],{type:e})),r.play(),this.stop=function(){r.pause(),r.currentTime=0}}function o(t){return new Promise(function(e,r){var n=new Blob([t]).slice(0,4),o=new FileReader;o.readAsText(n),o.onload=function(){var t=s.fromHeader(a(o.result));if(t)e(t);else{var n=new Error("Unable to determine content type from file header; only wav, flac, and ogg/opus are supported.");n.name=i.ERROR_UNSUPPORTED_FORMAT,r(n)}}})}var s=r(18),a=r(15);i.ERROR_UNSUPPORTED_FORMAT="UNSUPPORTED_FORMAT",t.exports=i,t.exports.getContentType=o,t.exports.playFile=function(t,e){return"string"==typeof t?Promise.resolve(new n(t)):e?Promise.resolve(new i(t,e)):o(t).then(function(e){return new i(t,e)})}},function(t,e,r){"use strict";(function(e){function n(t){this.options=s(t,{emitAt:n.END,delay:0,allowHalfOpen:!0,writableObjectMode:!0}),i.call(this,t),this.startTime=Date.now(),this.stopped=!1,this.timeout=null}var i=r(1).Transform,o=r(4),s=r(10),a=r(40);o.inherits(n,i),n.START=1,n.END=2,n.prototype._transform=function(t,r,n){if(t instanceof e)return n(new Error("TimingStream requires the source to be in objectMode"));if(Array.isArray(t.results)&&t.results.length&&a(t)){var i=new Error("TimingStream requires timestamps");return i.name=a.ERROR_NO_TIMESTAMPS,n(i)}if(!this.stopped){var o=this.getDelayMs(t),s=this.options.objectMode||this.options.readableObjectMode,u=Array.isArray(t.results&&t.results.length);if(!s&&u&&(t=t.results[0].alternatives[0].transcript),!s&&!u)return n();this.timeout=setTimeout(function(){n(null,t)},o)}},n.prototype.getMessageTime=function(t){if(this.options.emitAt===n.START){if(Array.isArray(t.results)&&t.results.length)return t.results[t.results.length-1].alternatives[0].timestamps[0][n.START];if(Array.isArray(t.speaker_labels)&&t.speaker_labels.length)return t.speaker_labels[0].from}else{if(Array.isArray(t.results)&&t.results.length){var e=t.results[t.results.length-1].alternatives[0].timestamps;return e[e.length-1][n.END]}if(Array.isArray(t.speaker_labels)&&t.speaker_labels.length)return t.speaker_labels[t.speaker_labels.length-1].to}return 0},n.prototype.getDelayMs=function(t){var e=this.getMessageTime(t),r=this.startTime+1e3*e-Date.now();return Math.max(0,r)},n.prototype.setStartTime=function(t){this.startTime=t||Date.now()},n.prototype.promise=r(9),n.prototype.stop=function(){this.stopped=!0,clearTimeout(this.timeout),this.emit("stop")},t.exports=n}).call(e,r(0).Buffer)},function(t,e,r){"use strict";e.version="0.34.0",e.SpeechToText=r(44),e.TextToSpeech=r(98)},function(t,e,r){"use strict";(function(e){t.exports={recognizeMicrophone:r(47),recognizeFile:r(85),getModels:r(97),WebAudioL16Stream:r(37),RecognizeStream:r(17),FilePlayer:r(41),FormatStream:r(19),TimingStream:r(42),ResultStream:r(22),SpeakerStream:r(23),WritableElementStream:r(21),getUserMedia:r(25),MicrophoneStream:r(26),Buffer:e}}).call(e,r(0).Buffer)},function(t,e,r){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}function o(t,e,r){for(var n,o=[],s=e;s<r;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(i(n));return o.join("")}e.byteLength=function(t){return 3*t.length/4-n(t)},e.toByteArray=function(t){var e,r,i,o,s,f,c=t.length;s=n(t),f=new u(3*c/4-s),i=s>0?c-4:c;var l=0;for(e=0,r=0;e<i;e+=4,r+=3)o=a[t.charCodeAt(e)]<<18|a[t.charCodeAt(e+1)]<<12|a[t.charCodeAt(e+2)]<<6|a[t.charCodeAt(e+3)],f[l++]=o>>16&255,f[l++]=o>>8&255,f[l++]=255&o;return 2===s?(o=a[t.charCodeAt(e)]<<2|a[t.charCodeAt(e+1)]>>4,f[l++]=255&o):1===s&&(o=a[t.charCodeAt(e)]<<10|a[t.charCodeAt(e+1)]<<4|a[t.charCodeAt(e+2)]>>2,f[l++]=o>>8&255,f[l++]=255&o),f},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,i="",a=[],u=0,f=r-n;u<f;u+=16383)a.push(o(t,u,u+16383>f?f:u+16383));return 1===n?(e=t[r-1],i+=s[e>>2],i+=s[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=s[e>>10],i+=s[e>>4&63],i+=s[e<<2&63],i+="="),a.push(i),a.join("")};for(var s=[],a=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,l=f.length;c<l;++c)s[c]=f[c],a[f.charCodeAt(c)]=c;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,f=u>>1,c=-7,l=r?i-1:0,h=r?-1:1,p=t[e+l];for(l+=h,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+t[e+l],l+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+l],l+=h,c-=8);if(0===o)o=1-f;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=f}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,f=8*o-i-1,c=(1<<f)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=c?(a=0,s=c):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[r+p]=255&s,p+=d,s/=256,f-=8);t[r+p-d]|=128*y}},function(t,e,r){"use strict";var n,i=r(25),o=r(26),s=r(17),a=r(37),u=r(19),f=r(38)(),c=r(21),l=r(1).Writable,h=r(22),p=r(23),d=new l({write:function(t,e,r){r()},objectMode:!0,decodeStrings:!1});t.exports=function(t){if(!t||!t.token)throw new Error("WatsonSpeechToText: missing required parameter: opts.token");t.outputElement&&!1!==t.objectMode&&(t.objectMode=!0),t.extractResults&&(t.objectMode=!0),t.resultsBySpeaker&&(t.objectMode=!0,t.speaker_labels=!0),t.format=!1!==t.format,void 0===t.smart_formatting&&(t.smart_formatting=t.format);var e,r=f({"content-type":"audio/l16;rate=16000",interim_results:!0},t),l=new s(r),y=[l],g=t.keepMicrophone;g&&n?(n.unpipe(d),e=Promise.resolve(n)):e=(t.mediaStream?Promise.resolve(t.mediaStream):i({video:!1,audio:!0})).then(function(e){var r=new o(e,{objectMode:!0,bufferSize:t.bufferSize});return g&&(n=r),Promise.resolve(r)});var b=l;return t.resultsBySpeaker&&(b=b.pipe(new p(t)),y.push(b)),t.format&&(b=b.pipe(new u(t)),y.push(b)),t.outputElement&&y.push(b.pipe(new c(t))),t.extractResults&&(b=b.pipe(new h),y.push(b)),e.catch(function(t){b.emit("error",t),"NotSupportedError"===t.name&&b.end()}),e.then(function(t){function e(){t.unpipe(r),t.pipe(d),r.end()}y.push(t);var r=new a({writableObjectMode:!0});t.pipe(r).pipe(l),y.push(r),g?(l.on("end",e),l.on("stop",e)):(l.on("end",t.stop.bind(t)),l.on("stop",t.stop.bind(t)))}).catch(l.emit.bind(l,"error")),y.forEach(function(t){t!==b&&t.on("error",b.emit.bind(b,"error"))}),b!==l&&(b.stop=l.stop.bind(l)),b.recognizeStream=l,b},t.exports.isSupported=i.isSupported},function(t,e){},function(t,e,r){"use strict";function n(){this.head=null,this.tail=null,this.length=0}r(0).Buffer;var i=r(13);t.exports=n,n.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},n.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},n.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},n.prototype.clear=function(){this.head=this.tail=null,this.length=0},n.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},n.prototype.concat=function(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var e=i.allocUnsafe(t>>>0),r=this.head,n=0;r;)r.data.copy(e,n),n+=r.data.length,r=r.next;return e}},function(t,e,r){function n(t,e){this._id=t,this._clearFn=e}var i=Function.prototype.apply;e.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r(51),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,r){(function(t,e){!function(t,r){"use strict";function n(t){delete u[t]}function i(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}function o(t){if(f)setTimeout(o,0,t);else{var e=u[t];if(e){f=!0;try{i(e)}finally{n(t),f=!1}}}}if(!t.setImmediate){var s,a=1,u={},f=!1,c=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?s=function(t){e.nextTick(function(){o(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?function(){var e="setImmediate$"+Math.random()+"$",r=function(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&o(+r.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),s=function(r){t.postMessage(e+r,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){o(t.data)},s=function(e){t.port2.postMessage(e)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var t=c.documentElement;s=function(e){var r=c.createElement("script");r.onreadystatechange=function(){o(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}}():s=function(t){setTimeout(o,0,t)},l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var n={callback:t,args:e};return u[a]=n,s(a),a++},l.clearImmediate=n}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,r(6),r(3))},function(t,e,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(e,r(6))},function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);i.call(this,t)}t.exports=n;var i=r(30),o=r(8);o.inherits=r(2),o.inherits(n,i),n.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){t.exports=r(14)},function(t,e,r){t.exports=r(5)},function(t,e,r){t.exports=r(7).Transform},function(t,e,r){t.exports=r(7).PassThrough},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){"use strict";var n,i,o,s=r(61),a="function"==typeof ArrayBuffer;if(a){if(r(32))try{o=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,o="number"==typeof o.call(new ArrayBuffer(4))&&o}catch(t){}!1===Boolean(o)&&(n=r(31),i="[object ArrayBuffer]")}t.exports=function(t){if(!1===a||!1===s(t))return!1;if(!1===Boolean(o))return n(t)===i;try{return"number"==typeof o.call(t)}catch(t){}return!1}},function(t,e,r){"use strict";var n=r(62),i=r(33);t.exports=function(t){return!1===i(t)&&!1===n(t,!0)}},function(t,e,r){"use strict";var n=Function.prototype.toString,i=r(31),o=r(32),s=r(33),a=r(66),u=r(71),f=!0;try{Function('"use strict"; return class My {};')()}catch(t){f=!1}var c=/^class /,l=function(t){try{return c.test(a(u(n.call(t)," ")))}catch(t){}return!1},h=function(t,e){try{return(!f||!1!==e||!l(t))&&(n.call(t),!0)}catch(t){}return!1};t.exports=function(t){if(s(t))return!1;var e=arguments.length>0&&Boolean(arguments[1]);if(o)return h(t,e);if(f&&!1===e&&l(t))return!1;var r=i(t);return"[object Function]"===r||"[object GeneratorFunction]"===r||"[object AsyncFunction]"===r}},function(t,e){t.exports=function(t){return null===t}},function(t,e,r){"use strict";t.exports=function(t){return void 0===t}},function(t,e,r){"use strict";t.exports="function"==typeof Symbol&&"symbol"==typeof Symbol("")},function(t,e,r){"use strict";var n=r(67),i=new RegExp("["+r(16).string+"]+","g");t.exports=function(t){return n(t).replace(i," ")}},function(t,e,r){"use strict";var n=r(68),i=r(70);t.exports=function(t){return n(i(t))}},function(t,e,r){"use strict";var n=r(34),i=new RegExp("^["+r(16).string+"]+");t.exports=function(t){return n(t).replace(i,"")}},function(t,e,r){"use strict";var n=Object.prototype.toString;if("function"==typeof Symbol&&"symbol"==typeof Symbol()){var i=Symbol.prototype.toString,o=/^Symbol\(.*\)$/,s=function(t){return"symbol"==typeof t.valueOf()&&o.test(i.call(t))};t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==n.call(t))return!1;try{return s(t)}catch(t){return!1}}}else t.exports=function(t){return!1}},function(t,e,r){"use strict";var n=r(34),i=new RegExp("["+r(16).string+"]+$");t.exports=function(t){return n(t).replace(i,"")}},function(t,e,r){"use strict";var n=r(72),i=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;t.exports=function(t){var e=arguments.length>1&&n(arguments[1])?arguments[1]:"";return n(t)?t.replace(i,e):""}},function(t,e,r){"use strict";var n=String.prototype.valueOf,i=function(t){try{return n.call(t),!0}catch(t){return!1}},o=Object.prototype.toString,s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"string"==typeof t||"object"==typeof t&&(s?i(t):"[object String]"===o.call(t))}},function(t,e,r){"use strict";t.exports=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)}},function(t,e,r){var n=function(){return this}(),i=n.WebSocket||n.MozWebSocket,o=r(75);t.exports={w3cwebsocket:i?function(t,e){return e?new i(t,e):new i(t)}:null,version:o}},function(t,e,r){t.exports=r(76).version},function(t,e){t.exports={_args:[[{raw:"websocket@^1.0.24",scope:null,escapedName:"websocket",name:"websocket",rawSpec:"^1.0.24",spec:">=1.0.24 <2.0.0",type:"range"},"/Users/nfriedly/watson-speech"]],_from:"websocket@>=1.0.24 <2.0.0",_id:"websocket@1.0.24",_inCache:!0,_location:"/websocket",_nodeVersion:"7.3.0",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/websocket-1.0.24.tgz_1482977757939_0.1858439394272864"},_npmUser:{name:"theturtle32",email:"brian@worlize.com"},_npmVersion:"3.10.10",_phantomChildren:{},_requested:{raw:"websocket@^1.0.24",scope:null,escapedName:"websocket",name:"websocket",rawSpec:"^1.0.24",spec:">=1.0.24 <2.0.0",type:"range"},_requiredBy:["/","/watson-developer-cloud"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.24.tgz",_shasum:"74903e75f2545b6b2e1de1425bc1c905917a1890",_shrinkwrap:null,_spec:"websocket@^1.0.24",_where:"/Users/nfriedly/watson-speech",author:{name:"Brian McKelvey",email:"brian@worlize.com",url:"https://www.worlize.com/"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},config:{verbose:!1},contributors:[{name:"I√±aki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.6"},description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.0.1"},directories:{lib:"./lib"},dist:{shasum:"74903e75f2545b6b2e1de1425bc1c905917a1890",tarball:"https://registry.npmjs.org/websocket/-/websocket-1.0.24.tgz"},engines:{node:">=0.8.0"},gitHead:"0e15f9445953927c39ce84a232cb7dd6e3adf12e",homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",maintainers:[{name:"theturtle32",email:"brian@worlize.com"}],name:"websocket",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.24"}},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,i="/"===s.charAt(0))}return e=r(n(e.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var i=e.isAbsolute(t),o="/"===s(t,-1);return(t=r(n(t.split("/"),function(t){return!!t}),!i).join("/"))||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split("/")),o=n(r.split("/")),s=Math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}for(var f=[],u=a;u<i.length;u++)f.push("..");return(f=f.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=o(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},e.basename=function(t,e){var r=o(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(e,r(3))},function(t,e,r){(function(e){var r=function(){"use strict";function t(r,i,o,s){function a(r,o){if(null===r)return null;if(0==o)return r;var l,h;if("object"!=typeof r)return r;if(t.__isArray(r))l=[];else if(t.__isRegExp(r))l=new RegExp(r.source,n(r)),r.lastIndex&&(l.lastIndex=r.lastIndex);else if(t.__isDate(r))l=new Date(r.getTime());else{if(c&&e.isBuffer(r))return l=new e(r.length),r.copy(l),l;void 0===s?(h=Object.getPrototypeOf(r),l=Object.create(h)):(l=Object.create(s),h=s)}if(i){var p=u.indexOf(r);if(-1!=p)return f[p];u.push(r),f.push(l)}for(var d in r){var y;h&&(y=Object.getOwnPropertyDescriptor(h,d)),y&&null==y.set||(l[d]=a(r[d],o-1))}return l}"object"==typeof i&&(o=i.depth,s=i.prototype,i.filter,i=i.circular);var u=[],f=[],c=void 0!==e;return void 0===i&&(i=!0),void 0===o&&(o=1/0),a(r,o)}function r(t){return Object.prototype.toString.call(t)}function n(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return t.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},t.__objToStr=r,t.__isDate=function(t){return"object"==typeof t&&"[object Date]"===r(t)},t.__isArray=function(t){return"object"==typeof t&&"[object Array]"===r(t)},t.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===r(t)},t.__getRegExpFlags=n,t}();"object"==typeof t&&t.exports&&(t.exports=r)}).call(e,r(0).Buffer)},function(t,e,r){"use strict";var n=r(39),i=r(81),o=function(t){return void 0!==t&&null!==t},s=r(83)(),a=Object,u=i.call(Function.call,Array.prototype.push),f=i.call(Function.call,Object.prototype.propertyIsEnumerable),c=s?Object.getOwnPropertySymbols:null;t.exports=function(t,e){if(!o(t))throw new TypeError("target must be an object");var r,i,l,h,p,d,y,g=a(t);for(r=1;r<arguments.length;++r){i=a(arguments[r]),h=n(i);var b=s&&(Object.getOwnPropertySymbols||c);if(b)for(p=b(i),l=0;l<p.length;++l)y=p[l],f(i,y)&&u(h,y);for(l=0;l<h.length;++l)d=i[y=h[l]],f(i,y)&&(g[y]=d)}return g}},function(t,e,r){"use strict";var n=Object.prototype.toString;t.exports=function(t){var e=n.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===n.call(t.callee)),r}},function(t,e,r){var n=r(82);t.exports=Function.prototype.bind||n},function(t,e){var r=Array.prototype.slice,n=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==n.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var i,o=r.call(arguments,1),s=Math.max(0,e.length-o.length),a=[],u=0;u<s;u++)a.push("$"+u);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof i){var n=e.apply(this,o.concat(r.call(arguments)));return Object(n)===n?n:this}return e.apply(t,o.concat(r.call(arguments)))}),e.prototype){var f=function(){};f.prototype=e.prototype,i.prototype=new f,f.prototype=null}return i}},function(t,e,r){"use strict";var n=r(39);t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;t[e]=42;for(e in t)return!1;if(0!==n(t).length)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var i=Object.getOwnPropertySymbols(t);if(1!==i.length||i[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},function(t,e){function r(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function n(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function i(t,e,r){if(e!==e)return n(t,s,r);for(var i=r-1,o=t.length;++i<o;)if(t[i]===e)return i;return-1}function o(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}function s(t){return t!==t}function a(t){return function(e){return t(e)}}function u(t,e,n,s){var u=s?o:i,l=-1,h=e.length,p=t;for(t===e&&(e=f(e)),n&&(p=r(t,a(n)));++l<h;)for(var d=0,y=e[l],g=n?n(y):y;(d=u(p,g,d,s))>-1;)p!==t&&c.call(p,d,1),c.call(t,d,1);return t}function f(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var c=Array.prototype.splice;t.exports=function(t,e,r){return t&&t.length&&e&&e.length?u(t,e,void 0,r):t}},function(t,e,r){"use strict";var n=r(86),i=r(17),o=r(41),s=r(19),a=r(42),u=r(38)(),f=r(21),c=r(22),l=r(23),h=r(18),p=r(87);t.exports=function(t){if(!t||!t.token)throw new Error("WatsonSpeechToText: missing required parameter: opts.token");t.data&&!t.file&&(t.file=t.data,delete t.data,t.silent||console.log(new Error("WatsonSpeechToText recognizeFile(): Warning data option was renamed to file. Set silent: true to hide this warning."))),t.outputElement&&!1!==t.objectMode&&(t.objectMode=!0),t.extractResults&&(t.objectMode=!0),t.resultsBySpeaker&&(t.objectMode=!0,t.speaker_labels=!0),t.format=!1!==t.format,void 0===t.smart_formatting&&(t.smart_formatting=t.format);var e=t.realtime||void 0===t.realtime&&t.play;e&&(t.timestamps=!0),t["content-type"]||(t["content-type"]=h.fromFilename(t.file));var r=u({interim_results:!0},t),d=new i(r),y=[d],g=d;if("string"==typeof t.file)p(t.file).then(function(t){return t.readable()}).then(function(t){t.pipe(d),y.unshift(t)}).catch(function(t){d.emit("error",t)});else{var b=new n(t.file);b.pipe(d),y.unshift(b)}var m;if(e?(m=new a(t),g=g.pipe(m),y.push(g),g.on("stop",d.stop.bind(d))):g.stop=d.stop.bind(d),t.resultsBySpeaker&&(g=g.pipe(new l(t)),y.push(g)),t.format&&(g=g.pipe(new s(t)),y.push(g)),t.play&&o.playFile(t.file,t["content-type"]).then(function(e){if(d.on("stop",e.stop.bind(e)),d.on("error",e.stop.bind(e)),m&&"string"==typeof t.file){var r=function(){m.setStartTime(),e.audio.removeEventListener("playing",r)};e.audio.addEventListener("playing",r)}}).catch(function(t){var e=y.filter(function(t){return t._readableState&&t._readableState.pipes&&(t._readableState.pipes===g||Array.isArray(t._readableState.pipes)&&-1!==t._readableState.pipes.indexOf(g))});g.emit("error",t),e.forEach(function(t){t.pipe(g)})}),t.outputElement&&y.push(g.pipe(new f(t))),t.extractResults){var v=g.stop?g.stop.bind(g):d.stop.bind(d);(g=g.pipe(new c)).stop=v,y.push(g)}return y.forEach(function(t){t!==g&&t.on("error",g.emit.bind(g,"error"))}),g.stop||(g.stop=m?m.stop.bind(m):d.stop.bind(d)),g.recognizeStream=d,g}},function(t,e,r){"use strict";(function(e,n){function i(t,e){if(!(this instanceof i))return new i(t,e);if(e=e||{},e.objectMode=!1,a.call(this,e),!t)throw Error('Missing argument "blob"');if("function"!=typeof t.slice)throw Error('Given argument "blob" is not really a Blob/File or your environment does not support .slice()');if(!f)throw Error("Your environment does not support FileReader");if(!c)throw Error("Your environment does not support Uint8Array");this.totalSize=t.size,this._blob=t,this._nextByteStart=0}function o(t){if("function"==typeof n._augment){if(!((t=n._augment(t))instanceof c))throw Error("Assertion error, buf should be an Uint8Array")}else t=new n(t);return t}function s(t){if(t=new c(t),"function"==typeof n._augment&&(t=n._augment(t)),!(t instanceof c))throw Error("Assertion error, buf should be an Uint8Array");return t}var a=r(1).Readable,u=r(2),f=e.FileReader,c=e.Uint8Array;t.exports=i,u(i,a),i.prototype.read=function(){var t=i.super_.prototype.read.apply(this,arguments);return!n.isBuffer(t)||t instanceof c||(t=s(t)),t},i.prototype._read=function(t){var e,r,n=this._blob.size;if(e=this._nextByteStart,r=Math.min(e+t,n),this._nextByteStart=r,e>=this._blob.size)this.push(null);else{var i=this._blob.slice(e,r),s=new f;s.onload=function(){var t=new c(s.result);t=o(t),this.push(t)}.bind(this),s.onerror=function(){this.emit("error",s.error)}.bind(this),s.readAsArrayBuffer(i)}}}).call(e,r(6),r(0).Buffer)},function(t,e,r){var n=r(88),i=r(90),o=r(94);t.exports=function(t,e){return i(e).then(function(e){return n(t,e).then(function(t){return o(t)})})}},function(t,e,r){r(89),t.exports=self.fetch.bind(self)},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return b.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function a(t){var e=new FileReader,r=s(e);return e.readAsArrayBuffer(t),r}function u(t){var e=new FileReader,r=s(e);return e.readAsText(t),r}function f(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function c(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(b.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(b.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(b.arrayBuffer&&b.blob&&v(t))this._bodyArrayBuffer=c(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!w(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(f(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function p(t,e){var r=(e=e||{}).body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=h(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}}),e}function y(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}}),e}function g(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var b={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(b.arrayBuffer)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=function(t){return t&&DataView.prototype.isPrototypeOf(t)},w=ArrayBuffer.isView||function(t){return t&&m.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,n){t=e(t),n=r(n);var i=this.map[t];this.map[t]=i?i+","+n:n},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,n){this.map[e(t)]=r(n)},i.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),n(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),n(t)},b.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},l.call(p.prototype),l.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var E=[301,302,303,307,308];g.redirect=function(t,e){if(-1===E.indexOf(e))throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=p,t.Response=g,t.fetch=function(t,e){return new Promise(function(r,n){var i=new p(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:y(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;r(new g(e,t))},o.onerror=function(){n(new TypeError("Network request failed"))},o.ontimeout=function(){n(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&b.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e,r){var n=r(91);t.exports=function(t){return(t=t||{}).body&&t.body.readable?n(t.body).then(function(e){return t.body=e,t}):Promise.resolve(t)}},function(t,e,r){var n=r(92);t.exports=function(t){return new Promise(function(e,r){var i=n();t.on("error",r),t.on("end",function(){e(i.getBody())}),t.pipe(i)})}},function(t,e,r){(function(e){function n(t,e){if(!(this instanceof n))return new n(t,e);"function"==typeof t&&(e=t,t={}),t||(t={});var r=t.encoding,i=!1;r?"u8"!==(r=String(r).toLowerCase())&&"uint8"!==r||(r="uint8array"):i=!0,c.call(this,{objectMode:!0}),this.encoding=r,this.shouldInferEncoding=i,e&&this.on("finish",function(){e(this.getBody())}),this.body=[]}function i(t){return/Array\]$/.test(Object.prototype.toString.call(t))}function o(t){return"string"==typeof t||i(t)||t&&"function"==typeof t.subarray}function s(t){for(var r=[],n=0;n<t.length;n++){var i=t[n];"string"==typeof i?r.push(i):e.isBuffer(i)?r.push(i):o(i)?r.push(new e(i)):r.push(new e(String(i)))}return r=e.isBuffer(t[0])?(r=e.concat(r)).toString("utf8"):r.join("")}function a(t){for(var r=[],n=0;n<t.length;n++){var i=t[n];e.isBuffer(i)?r.push(i):o(i)?r.push(new e(i)):r.push(new e(String(i)))}return e.concat(r)}function u(t){for(var e=[],r=0;r<t.length;r++)e.push.apply(e,t[r]);return e}function f(t){for(var r=0,n=0;n<t.length;n++)"string"==typeof t[n]&&(t[n]=new e(t[n])),r+=t[n].length;for(var i=new h(r),n=0,o=0;n<t.length;n++)for(var s=t[n],a=0;a<s.length;a++)i[o++]=s[a];return i}var c=r(7).Writable,l=r(2);if("undefined"==typeof Uint8Array)h=r(93).Uint8Array;else var h=Uint8Array;t.exports=n,l(n,c),n.prototype._write=function(t,e,r){this.body.push(t),r()},n.prototype.inferEncoding=function(t){var r=void 0===t?this.body[0]:t;return e.isBuffer(r)?"buffer":"undefined"!=typeof Uint8Array&&r instanceof Uint8Array?"uint8array":Array.isArray(r)?"array":"string"==typeof r?"string":"[object Object]"===Object.prototype.toString.call(r)?"object":"buffer"},n.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?u(this.body):"string"===this.encoding?s(this.body):"buffer"===this.encoding?a(this.body):"uint8array"===this.encoding?f(this.body):this.body):[]};Array.isArray}).call(e,r(0).Buffer)},function(t,e){function r(t){if(I&&A){var e,r=I(t);for(e=0;e<r.length;e+=1)A(t,r[e],{value:t[r[e]],writable:!1,enumerable:!1,configurable:!1})}}function n(t){if(A){if(t.length>O)throw new RangeError("Array too large for polyfill");var e;for(e=0;e<t.length;e+=1)!function(e){A(t,e,{get:function(){return t._getter(e)},set:function(r){t._setter(e,r)},enumerable:!0,configurable:!1})}(e)}}function i(t,e){var r=32-e;return t<<r>>r}function o(t,e){var r=32-e;return t<<r>>>r}function s(t){return[255&t]}function a(t){return i(t[0],8)}function u(t){return[255&t]}function f(t){return o(t[0],8)}function c(t){return t=U(Number(t)),[t<0?0:t>255?255:255&t]}function l(t){return[t>>8&255,255&t]}function h(t){return i(t[0]<<8|t[1],16)}function p(t){return[t>>8&255,255&t]}function d(t){return o(t[0]<<8|t[1],16)}function y(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]}function g(t){return i(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function b(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]}function m(t){return o(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function v(t,e,r){function n(t){var e=B(t),r=t-e;return r<.5?e:r>.5?e+1:e%2?e+1:e}var i,o,s,a,u,f,c,l=(1<<e-1)-1;for(t!==t?(o=(1<<e)-1,s=L(2,r-1),i=0):t===1/0||t===-1/0?(o=(1<<e)-1,s=0,i=t<0?1:0):0===t?(o=0,s=0,i=1/t==-1/0?1:0):(i=t<0,(t=k(t))>=L(2,1-l)?(o=M(B(P(t)/j),1023),(s=n(t/L(2,o)*L(2,r)))/L(2,r)>=2&&(o+=1,s=1),o>l?(o=(1<<e)-1,s=0):(o+=l,s-=L(2,r))):(o=0,s=n(t/L(2,1-l-r)))),u=[],a=r;a;a-=1)u.push(s%2?1:0),s=B(s/2);for(a=e;a;a-=1)u.push(o%2?1:0),o=B(o/2);for(u.push(i?1:0),u.reverse(),f=u.join(""),c=[];f.length;)c.push(parseInt(f.substring(0,8),2)),f=f.substring(8);return c}function w(t,e,r){var n,i,o,s,a,u,f,c,l=[];for(n=t.length;n;n-=1)for(o=t[n-1],i=8;i;i-=1)l.push(o%2?1:0),o>>=1;return l.reverse(),s=l.join(""),a=(1<<e-1)-1,u=parseInt(s.substring(0,1),2)?-1:1,f=parseInt(s.substring(1,1+e),2),c=parseInt(s.substring(1+e),2),f===(1<<e)-1?0!==c?NaN:u*(1/0):f>0?u*L(2,f-a)*(1+c/L(2,r)):0!==c?u*L(2,-(a-1))*(c/L(2,r)):u<0?-0:0}function _(t){return w(t,11,52)}function E(t){return v(t,11,52)}function S(t){return w(t,8,23)}function T(t){return v(t,8,23)}var A,R=void 0,O=1e5,x=function(){var t=Object.prototype.toString,e=Object.prototype.hasOwnProperty;return{Class:function(e){return t.call(e).replace(/^\[object *|\]$/g,"")},HasProperty:function(t,e){return e in t},HasOwnProperty:function(t,r){return e.call(t,r)},IsCallable:function(t){return"function"==typeof t},ToInt32:function(t){return t>>0},ToUint32:function(t){return t>>>0}}}(),j=Math.LN2,k=Math.abs,B=Math.floor,P=Math.log,M=Math.min,L=Math.pow,U=Math.round;A=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}()?Object.defineProperty:function(t,e,r){if(!t===Object(t))throw new TypeError("Object.defineProperty called on non-object");return x.HasProperty(r,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(t,e,r.get),x.HasProperty(r,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(t,e,r.set),x.HasProperty(r,"value")&&(t[e]=r.value),t};var I=Object.getOwnPropertyNames||function(t){if(t!==Object(t))throw new TypeError("Object.getOwnPropertyNames called on non-object");var e,r=[];for(e in t)x.HasOwnProperty(t,e)&&r.push(e);return r};!function(){function t(t,e,s){var a;return a=function(t,e,o){var s,u,f,c;if(arguments.length&&"number"!=typeof arguments[0])if("object"==typeof arguments[0]&&arguments[0].constructor===a)for(s=arguments[0],this.length=s.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new i(this.byteLength),this.byteOffset=0,f=0;f<this.length;f+=1)this._setter(f,s._getter(f));else if("object"!=typeof arguments[0]||(arguments[0]instanceof i||"ArrayBuffer"===x.Class(arguments[0]))){if("object"!=typeof arguments[0]||!(arguments[0]instanceof i||"ArrayBuffer"===x.Class(arguments[0])))throw new TypeError("Unexpected argument type(s)");if(this.buffer=t,this.byteOffset=x.ToUint32(e),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=x.ToUint32(o),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else for(u=arguments[0],this.length=x.ToUint32(u.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new i(this.byteLength),this.byteOffset=0,f=0;f<this.length;f+=1)c=u[f],this._setter(f,Number(c));else{if(this.length=x.ToInt32(arguments[0]),o<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new i(this.byteLength),this.byteOffset=0}this.constructor=a,r(this),n(this)},a.prototype=new o,a.prototype.BYTES_PER_ELEMENT=t,a.prototype._pack=e,a.prototype._unpack=s,a.BYTES_PER_ELEMENT=t,a.prototype._getter=function(t){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if((t=x.ToUint32(t))>=this.length)return R;var e,r,n=[];for(e=0,r=this.byteOffset+t*this.BYTES_PER_ELEMENT;e<this.BYTES_PER_ELEMENT;e+=1,r+=1)n.push(this.buffer._bytes[r]);return this._unpack(n)},a.prototype.get=a.prototype._getter,a.prototype._setter=function(t,e){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if((t=x.ToUint32(t))>=this.length)return R;var r,n,i=this._pack(e);for(r=0,n=this.byteOffset+t*this.BYTES_PER_ELEMENT;r<this.BYTES_PER_ELEMENT;r+=1,n+=1)this.buffer._bytes[n]=i[r]},a.prototype.set=function(t,e){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var r,n,i,o,s,a,u,f,c,l;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(r=arguments[0],(i=x.ToUint32(arguments[1]))+r.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(f=this.byteOffset+i*this.BYTES_PER_ELEMENT,c=r.length*this.BYTES_PER_ELEMENT,r.buffer===this.buffer){for(l=[],s=0,a=r.byteOffset;s<c;s+=1,a+=1)l[s]=r.buffer._bytes[a];for(s=0,u=f;s<c;s+=1,u+=1)this.buffer._bytes[u]=l[s]}else for(s=0,a=r.byteOffset,u=f;s<c;s+=1,a+=1,u+=1)this.buffer._bytes[u]=r.buffer._bytes[a]}else{if("object"!=typeof arguments[0]||void 0===arguments[0].length)throw new TypeError("Unexpected argument type(s)");if(n=arguments[0],o=x.ToUint32(n.length),(i=x.ToUint32(arguments[1]))+o>this.length)throw new RangeError("Offset plus length of array is out of range");for(s=0;s<o;s+=1)a=n[s],this._setter(i+s,Number(a))}},a.prototype.subarray=function(t,e){function r(t,e,r){return t<e?e:t>r?r:t}t=x.ToInt32(t),e=x.ToInt32(e),arguments.length<1&&(t=0),arguments.length<2&&(e=this.length),t<0&&(t=this.length+t),e<0&&(e=this.length+e),t=r(t,0,this.length);var n=(e=r(e,0,this.length))-t;return n<0&&(n=0),new this.constructor(this.buffer,this.byteOffset+t*this.BYTES_PER_ELEMENT,n)},a}var i=function(t){if((t=x.ToInt32(t))<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=t,this._bytes=[],this._bytes.length=t;var e;for(e=0;e<this.byteLength;e+=1)this._bytes[e]=0;r(this)};e.ArrayBuffer=e.ArrayBuffer||i;var o=function(){},v=t(1,s,a),w=t(1,u,f),A=t(1,c,f),O=t(2,l,h),j=t(2,p,d),k=t(4,y,g),B=t(4,b,m),P=t(4,T,S),M=t(8,E,_);e.Int8Array=e.Int8Array||v,e.Uint8Array=e.Uint8Array||w,e.Uint8ClampedArray=e.Uint8ClampedArray||A,e.Int16Array=e.Int16Array||O,e.Uint16Array=e.Uint16Array||j,e.Int32Array=e.Int32Array||k,e.Uint32Array=e.Uint32Array||B,e.Float32Array=e.Float32Array||P,e.Float64Array=e.Float64Array||M}(),function(){function t(t,e){return x.IsCallable(t.get)?t.get(e):t[e]}function n(r){return function(n,i){if((n=x.ToUint32(n))+r.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");n+=this.byteOffset;var s,a=new e.Uint8Array(this.buffer,n,r.BYTES_PER_ELEMENT),u=[];for(s=0;s<r.BYTES_PER_ELEMENT;s+=1)u.push(t(a,s));return Boolean(i)===Boolean(o)&&u.reverse(),t(new r(new e.Uint8Array(u).buffer),0)}}function i(r){return function(n,i,s){if((n=x.ToUint32(n))+r.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var a,u=new r([i]),f=new e.Uint8Array(u.buffer),c=[];for(a=0;a<r.BYTES_PER_ELEMENT;a+=1)c.push(t(f,a));Boolean(s)===Boolean(o)&&c.reverse(),new e.Uint8Array(this.buffer,n,r.BYTES_PER_ELEMENT).set(c)}}var o=function(){var r=new e.Uint16Array([4660]);return 18===t(new e.Uint8Array(r.buffer),0)}(),s=function(t,n,i){if(0===arguments.length)t=new e.ArrayBuffer(0);else if(!(t instanceof e.ArrayBuffer||"ArrayBuffer"===x.Class(t)))throw new TypeError("TypeError");if(this.buffer=t||new e.ArrayBuffer(0),this.byteOffset=x.ToUint32(n),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(arguments.length<3?this.byteLength=this.buffer.byteLength-this.byteOffset:this.byteLength=x.ToUint32(i),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");r(this)};s.prototype.getUint8=n(e.Uint8Array),s.prototype.getInt8=n(e.Int8Array),s.prototype.getUint16=n(e.Uint16Array),s.prototype.getInt16=n(e.Int16Array),s.prototype.getUint32=n(e.Uint32Array),s.prototype.getInt32=n(e.Int32Array),s.prototype.getFloat32=n(e.Float32Array),s.prototype.getFloat64=n(e.Float64Array),s.prototype.setUint8=i(e.Uint8Array),s.prototype.setInt8=i(e.Int8Array),s.prototype.setUint16=i(e.Uint16Array),s.prototype.setInt16=i(e.Int16Array),s.prototype.setUint32=i(e.Uint32Array),s.prototype.setInt32=i(e.Int32Array),s.prototype.setFloat32=i(e.Float32Array),s.prototype.setFloat64=i(e.Float64Array),e.DataView=e.DataView||s}()},function(t,e,r){var n=r(95),i=r(96);t.exports=function(t){return t.body&&t.body.getReader?t.readable=function(){return Promise.resolve(new i(t.body.getReader()))}:t.readable=function(){return t.body&&t.body.readable?Promise.resolve(t.body):t.bodyUsed?Promise.reject(new Error("body already in use")):t.arrayBuffer().then(function(t){return new n(t)})},t}},function(t,e,r){(function(e){function n(t){var r=this;o.call(this),this._read=function(){r.push(new e(t)),r.push(null)}}var i=r(2),o=r(7);i(n,o),t.exports=n}).call(e,r(0).Buffer)},function(t,e,r){(function(e){function n(t){var r=this;o.call(this),this._read=function(){t.read().then(function(t){t.done?r.push(null):r.push(new e(t.value))}).catch(function(t){r.emit("error",t)})}}var i=r(2),o=r(7);i(n,o),t.exports=n}).call(e,r(0).Buffer)},function(t,e,r){"use strict";t.exports=function(t){if(!t||!t.token)throw new Error("Watson SpeechToText: missing required parameter: options.token");var e={credentials:"omit",headers:{accept:"application/json"}};return fetch("https://stream.watsonplatform.net/speech-to-text/api/v1/models?watson-token="+t.token,e).then(function(t){return t.json()}).then(function(t){return t.models})}},function(t,e,r){"use strict";e.synthesize=r(99),e.getVoices=r(100)},function(t,e,r){"use strict";var n=r(35),i=r(36),o=["voice","X-WDC-PL-OPT-OUT","X-Watson-Learning-Opt-Out","text","watson-token","accept","customization_id"];t.exports=function(t){if(!t||!t.token)throw new Error("Watson TextToSpeech: missing required parameter: options.token");t["watson-token"]=t.token,delete t.token;var e=t.element||new Audio;return e.crossOrigin="anonymous",e.src="https://stream.watsonplatform.net/text-to-speech/api/v1/synthesize?"+i.stringify(n(t,o)),!1!==t.autoPlay&&e.play(),e}},function(t,e,r){"use strict";t.exports=function(t){if(!t||!t.token)throw new Error("Watson TextToSpeech: missing required parameter: options.token");var e={credentials:"omit",headers:{accept:"application/json"}};return fetch("https://stream.watsonplatform.net/text-to-speech/api/v1/voices?watson-token="+t.token,e).then(function(t){return t.json()}).then(function(t){return t.voices})}}])});